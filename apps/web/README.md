# Web project

This project contains the front end portion of our project meant to deal with interacting with the `OnchainRidle.sol` contract. It uses primarily `ether` to facilitate changes in the blockchain, relies on **Metamask** wallet to be installed for interactions and signing of transactions and also stores guesses into a local postgres db. 

## Project structure 

The project is based on the `app router` components structure of Next.js. It uses tailwindcss for styling and has a typescript configuration. It also contains a `prisma` configuration, dealing with migration, database initialization, input sanitization. The smart contract types, generated by typechain, are also used here as a copied dependency. For the future they should be migrated into a package at @repo level, similar to `tailwind-config`  

### Pages structure

The app consists of two pages - Home `'/'` and `'/history'`. 

**The home(root)** directory displays the riddle component. It provides the ability to connect a Metamask wallet and use it to guess the current active riddle. A person can guess the riddle only when one is active in the smart contract on the correct chain. It is possible to assign also an alias to the guess in order to track who has attempted to guess the riddle, but it isn't required. The only mandatory thing is having a wallet to sign a transaction and a non-empty guess. Before submitting an answer there are some validations and also making sure to trim the answer while setting it to lowercase for a succesful comparison with the `bytes32` object in the smart contract.

**The history** directory shows a simple table, which retrieves all stored guesses from the database.

Currently there are no tests due to missing jest nextjs configuration, but this is planned for the future.

#### Prisma
In this project Prisma is used to generate the schema and manage migrations for the communication with the postgres server. For instructions on how to start the app refer to the root `README` file.

#### Docker
We use docker compose to spin up the postgres container. The env variable is currently hardcoded since there are missing key production features. The `Dockerfile` is suspended momentarily due to issues with configuration between `turborepo` and `prisma`. This is to be completed in the future.
